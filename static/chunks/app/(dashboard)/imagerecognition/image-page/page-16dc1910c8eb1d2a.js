(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6007],{53522:function(e,t,n){Promise.resolve().then(n.bind(n,37479)),Promise.resolve().then(n.bind(n,87862))},44177:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(57437),i=n(76741),a=n(91699);function s(e){let t,n,{children:s,type:o="scale",direction:l="right",offset:c=10,scale:d={hover:1.05,tap:.95}}=e;switch(l){case"up":case"left":t=c,n=0;break;default:t=0,n=c}let[u,h]=(0,i.n)(t,n),[m,p]=(0,i.n)(t,n);switch(o){case"rotate":return(0,r.jsx)(a.E.div,{animate:{rotate:360},transition:{repeat:1/0,repeatType:"loop",duration:2,repeatDelay:0},children:s});case"slide":if("up"===l||"down"===l)return(0,r.jsx)(a.E.div,{animate:{y:void 0!==m?m:""},onHoverEnd:()=>p(),onHoverStart:()=>p(),children:s});return(0,r.jsx)(a.E.div,{animate:{x:void 0!==u?u:""},onHoverEnd:()=>h(),onHoverStart:()=>h(),children:s});default:return"number"==typeof d&&(d={hover:d,tap:d}),(0,r.jsx)(a.E.div,{whileHover:{scale:null==d?void 0:d.hover},whileTap:{scale:null==d?void 0:d.tap},children:s})}}},99860:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(57437),i=n(21170),a=n(5186);function s(){return(0,r.jsx)(i.Z,{sx:{position:"fixed",top:0,left:0,zIndex:2001,width:"100%"},children:(0,r.jsx)(a.Z,{color:"primary"})})}},8316:function(e,t,n){"use strict";n.d(t,{Hr:function(){return p},Zb:function(){return h},aX:function(){return w},dk:function(){return v},hY:function(){return u},oR:function(){return Z},pG:function(){return y},xk:function(){return m}});var r,i,a,s,o,l,c,d,u,h,m,p,x,g,f=n(54317),j=n.n(f);let v="/home",Z=7,y=260,w=60;(r=d||(d={})).SIMPLE="simple",r.LANDING="landing",(i=u||(u={})).LIGHT="light",i.DARK="dark",(a=h||(h={})).VERTICAL="vertical",a.HORIZONTAL="horizontal",(s=m||(m={})).LTR="ltr",s.RTL="rtl",(o=p||(p={})).FUNCTION="function",o.LINK="link",(l=x||(x={})).MALE="Male",l.FEMALE="Female",(c=g||(g={})).DEFAULT="default",c.STANDARD="standard";let E={fontFamily:j().style.fontFamily,i18n:"en",menuOrientation:"vertical",miniDrawer:!1,container:!0,mode:"light",presetColor:"default",themeDirection:"ltr"};t.ZP=E},55447:function(e,t,n){"use strict";n.d(t,{_i:function(){return s}});var r=n(83464),i=n(80605);let a=r.Z.create({baseURL:"http://localhost:4000/"});a.interceptors.request.use(async e=>{let t=await (0,i.getSession)();return(null==t?void 0:t.token.accessToken)&&(e.headers.Authorization="Bearer ".concat(null==t?void 0:t.token.accessToken)),e},e=>Promise.reject(e)),a.interceptors.response.use(e=>e,e=>"ECONNREFUSED"===e.code?Promise.reject({message:"Connection refused. The credential server may be down."}):e.response.status>=500?Promise.reject({message:"Server Error. Contact support"}):(401!==e.response.status||window.location.href.includes("/login")||(window.location.pathname="/login"),Promise.reject(e.response&&e.response.data||"Wrong Services"))),t.ZP=a;let s=async e=>{let[t,n]=Array.isArray(e)?e:[e];return(await a.get(t,{...n})).data}},37479:function(e,t,n){"use strict";n.d(t,{default:function(){return c}});var r=n(57437),i=n(2265),a=n(99376),s=n(80605),o=n(99860),l=n(8316);function c(e){let{children:t}=e,{data:n,status:c}=(0,s.useSession)(),d=(0,a.useRouter)();return((0,i.useEffect)(()=>{(async()=>{let e=await fetch("/api/auth/protected"),t=await (null==e?void 0:e.json());if(null==t?void 0:t.protected){let e=l.dk;d.push(e)}})()},[n]),"loading"===c||(null==n?void 0:n.user))?(0,r.jsx)(o.Z,{}):t}},87862:function(e,t,n){"use strict";n.d(t,{default:function(){return I}});var r=n(57437),i=n(2265),a=n(67116),s=n(93062),o=n(21170),l=n(8790),c=n(46387),d=n(85765),u=n(76464),h=n(96289),m=n(82279),p=n(62069),x=n(41530),g=n(10020),f=n(76631),j=n(69459),v=n(67208),Z=n(36137),y=n(67571),w=n(1346),E=n(34422),A=n(82326),P=n(44177),S=n(55447),T=n(33145);function b(e){let{onSuccess:t,onError:n}=e,[a,s]=(0,i.useState)(null),[l,d]=(0,i.useState)(!1),[u,h]=(0,i.useState)(null),{getRootProps:m,getInputProps:b,imagePreview:k,setImagePreview:L}=function(){let[e,t]=(0,i.useState)(null),{getRootProps:n,getInputProps:r}=(0,w.uI)({accept:{"image/jpeg":[".jpeg",".jpg"],"image/png":[".png"],"image/gif":[".gif"]},onDrop:e=>{if(e.length>0){let n=e[0];t(URL.createObjectURL(n))}}});return{getRootProps:n,getInputProps:r,imagePreview:e,setImagePreview:t}}();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(A.J9,{initialValues:{image:null,submit:null},validationSchema:E.Ry().shape({image:E.nK().required("An image is required").test("fileType","Unsupported file type. Please upload a JPEG, PNG, or GIF image.",e=>e&&["image/jpeg","image/png","image/gif"].includes(null==e?void 0:e.type))}),onSubmit:(e,r)=>{let{setErrors:i,setSubmitting:a,resetForm:o}=r,l=new FormData;e.image&&l.append("image",e.image),S.ZP.post("/analyze",l,{headers:{"Content-Type":"multipart/form-data"}}).then(e=>{console.log(e.data),a(!1),o(),s(e.data),d(!0),L(null),h(k),t()}).catch(e=>{var t,r;let s=(null===(r=e.response)||void 0===r?void 0:null===(t=r.data)||void 0===t?void 0:t.error)||e.message||"An unexpected error occurred";i({submit:s}),a(!1),d(!1),n(s)})},children:e=>{let{values:t,errors:n,touched:i,handleSubmit:a,isSubmitting:s,setFieldValue:l}=e;return(0,r.jsx)("form",{noValidate:!0,onSubmit:a,children:(0,r.jsxs)(p.ZP,{container:!0,spacing:3,children:[(0,r.jsxs)(p.ZP,{item:!0,xs:12,children:[(0,r.jsxs)(x.Z,{spacing:1,justifyContent:"center",alignItems:"center",children:[(0,r.jsx)(g.Z,{htmlFor:"image",children:"Upload an Image"}),(0,r.jsxs)(o.Z,{...m(),sx:{border:"2px dashed gray",padding:4,textAlign:"center",cursor:"pointer",justifyContent:"center",alignItems:"center",width:300,height:200},children:[(0,r.jsx)("input",{...b(),onChange:e=>{let t=e.target.files||[];t.length>0&&l("image",t[0])}}),(0,r.jsx)(c.Z,{variant:"h6",children:"Drag & drop an image here, or click to select one"}),(0,r.jsx)(f.Z,{variant:"contained",sx:{mt:2},children:"Upload Image"})]}),k&&(0,r.jsx)(o.Z,{mt:2,textAlign:"center",children:(0,r.jsx)(T.default,{src:k,alt:"Preview",width:"200",height:"200"})})]}),i.image&&n.image&&(0,r.jsx)(j.Z,{error:!0,children:n.image})]}),(0,r.jsx)(p.ZP,{item:!0,xs:12,children:(0,r.jsx)(P.Z,{children:(0,r.jsx)(f.Z,{disableElevation:!0,disabled:s,fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"primary",children:"ANALYZE"})})})]})})}}),l&&a&&(0,r.jsx)(p.ZP,{container:!0,spacing:3,sx:{marginTop:4},children:(0,r.jsxs)(p.ZP,{item:!0,xs:12,children:[(0,r.jsx)(c.Z,{variant:"h4",gutterBottom:!0,children:"Analysis Results"}),(0,r.jsx)(v.Z,{children:(0,r.jsxs)(Z.Z,{children:[(0,r.jsx)(c.Z,{variant:"h6",children:"Description:"}),a.description.captions.map((e,t)=>(0,r.jsxs)(c.Z,{children:[e.text," (Confidence: ",(100*e.confidence).toFixed(2),"%)"]},t)),(0,r.jsx)(c.Z,{variant:"h6",sx:{marginTop:2},children:"Tags:"}),(0,r.jsx)(o.Z,{display:"flex",flexWrap:"wrap",gap:1,children:(0,r.jsx)(o.Z,{display:"flex",flexWrap:"wrap",gap:1,children:a.tags.map((e,t)=>(0,r.jsx)(y.Z,{label:"".concat(e.name," (").concat((100*e.confidence).toFixed(2),"%)"),color:"primary",sx:{fontSize:"0.9rem",backgroundColor:e.confidence>.7?"green":e.confidence>.4?"orange":"red",color:"white"}},t))})}),(0,r.jsx)(c.Z,{variant:"h6",sx:{marginTop:2},children:"Metadata:"}),(0,r.jsxs)(p.ZP,{direction:"row",container:!0,spacing:2,children:[(0,r.jsxs)(p.ZP,{item:!0,xs:12,md:6,children:[(0,r.jsxs)(c.Z,{children:["Width: ",a.metadata.width,"px"]}),(0,r.jsxs)(c.Z,{children:["Height: ",a.metadata.height,"px"]}),(0,r.jsxs)(c.Z,{children:["Format: ",a.metadata.format]})]}),(0,r.jsx)(p.ZP,{item:!0,xs:12,md:6,textAlign:"center",sx:{marginTop:-5,marginLeft:0},children:u&&(0,r.jsx)(o.Z,{mt:2,children:(0,r.jsx)(T.default,{src:u,alt:"Preview",width:"100",height:"100"})})})]})]})})]})})]})}var k=n(10764);let L=(0,u.Z)(),C={showAlert:!1,alertMessage:"",alertSeverity:""};function I(){let[e,t]=i.useState(C);return(0,r.jsxs)(h.Z,{theme:L,children:[e.showAlert&&(0,r.jsx)(m.Z,{severity:e.alertSeverity,onClose:()=>t(C),children:e.alertMessage}),(0,r.jsxs)(d.Z,{component:"main",maxWidth:"xs",children:[(0,r.jsx)(s.ZP,{}),(0,r.jsxs)(o.Z,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,r.jsx)(a.Z,{sx:{m:1,bgcolor:k.Z},children:(0,r.jsx)(l.Z,{})}),(0,r.jsx)(c.Z,{component:"h1",variant:"h5",children:"Select an image for analysis"}),(0,r.jsx)(o.Z,{sx:{mt:1},children:(0,r.jsx)(b,{onSuccess:()=>{t({showAlert:!0,alertMessage:"The image was successfully analyzed",alertSeverity:"success"})},onError:e=>{t({showAlert:!0,alertMessage:"Message NOT sent! Error: "+e,alertSeverity:"error"})}})})]})]})]})}}},function(e){e.O(0,[5590,1860,7576,5169,605,7594,2257,6538,4787,8142,737,4048,1392,3508,2971,2117,1744],function(){return e(e.s=53522)}),_N_E=e.O()}]);